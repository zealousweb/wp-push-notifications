jQuery(document).ready(function(e){function t(e){return window.localStorage.setItem("unique_user_id",e)}function n(){return window.localStorage.getItem("unique_user_id")}function o(e){var o=n();jQuery.ajax({type:"post",url:zealwpn_object.ajax_url,data:{action:"notification_token",token:e,unique_id:o},success:function(e){t(e)}})}TokenElem=document.getElementById("token");var i={apiKey:zealwpn_object.notification_apiKey,authDomain:zealwpn_object.notification_authDomain,projectId:zealwpn_object.notification_projectId,storageBucket:zealwpn_object.notification_storageBucket,messagingSenderId:zealwpn_object.notification_senderId,appId:zealwpn_object.notification_appId};firebase.initializeApp(i),firebase.analytics();const a=firebase.messaging();navigator.serviceWorker.register(zealwpn_object.pluginsUrl+"assets/js/firebase-messaging-sw.js").then(function(e){a.useServiceWorker(e),a.requestPermission().then(function(){a.getToken().then(function(e){if(e){var e=e;o(e)}else console.log("No Instance ID token available. Request permission to generate one.")})["catch"](function(e){console.log("Error while fetching the token "+e)})})["catch"](function(e){console.log("Permission denied "+e)})})["catch"](function(){console.log("Error in registering service worker")}),a.onTokenRefresh(function(){a.getToken().then(function(e){if(e){var t=e;o(t)}else console.log("No Instance ID token available. Request permission to generate one.")})["catch"](function(e){console.log("Error in fetching refreshed token "+e)})}),a.onMessage(function(e){var t=e.data.title;const n={body:e.data.body,icon:e.data.icon,image:e.data.image,click_action:e.data.click_action,badge:e.data.icon,data:{click_action:e.data.click_action}};new Notification(t,n)})});
